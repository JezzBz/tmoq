Нужно реализовать каждый эндпоинт с логикой, соответствующей его смыслу

1.Бенефециары и реквизиты
1.1 GET beneficiaries

Возвращает информацию о бенефициарах компании.
параметры:
limit : number
offset: number
пример ответа:
{"offset":0,"limit":50,"size":7,"total":7,"results":[{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","type":"FL_RESIDENT","firstName":"Фома","middleName":"Семенович","lastName":"Киняев","isSelfEmployed":true,"birthDate":"1969-08-21","birthPlace":"г. Москва","citizenship":"RU","phoneNumber":"+79998887766","email":"f.kiniaev@tbank.ru","documents":[{"type":"PASSPORT","serial":"5000","number":"287846","date":"1998-01-01","organization":"Отделом УФМС по всем городам всех областей необъятной нашей Родины","division":"123-456"}],"addresses":[{"type":"REGISTRATION_ADDRESS","address":"127287, г. Москва, ул. 2-я Хуторская, д. 38А, стр. 26"}],"inn":"266445718640","snils":"72865174431"},{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","type":"FL_NONRESIDENT","firstName":"John","middleName":"William","lastName":"Smith","isSelfEmployed":false,"birthDate":"1978-04-03","birthPlace":"Pietersburg","citizenship":"US","phoneNumber":"+12025550190","email":"john.smith@example.com","documents":[{"type":"FOREIGN_PASSPORT","number":"123456789","date":"1992-02-12","organization":"Issuing organization"},{"type":"VISA","number":"123456789","date":"1998-01-01","expireDate":"2023-01-01"}],"addresses":[{"type":"RESIDENCE_ADDRESS","address":"Pietersburg, Transvaal Province, South Africa"}],"inn":"906858195320"},{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","type":"UL_RESIDENT","name":"Акционерное общество «ТБанк»","phoneNumber":"+78007551110","email":"business.welcome@tbank.ru","addresses":[{"type":"LEGAL_ENTITY_ADDRESS","address":"127287, г. Москва, ул. Хуторская 2-я, д. 38А, стр. 26"},{"type":"POSTAL_ADDRESS","address":"Москва, 127287, ул. Хуторская 2-я, д. 38А, стр. 26; а/я 23, г. Москва, 102001"}],"registrationDate":"2002-11-28","opf":"АО","inn":"7710140679","ogrn":"1027739642281"},{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","type":"UL_NONRESIDENT","name":"TCS Group Holding Plc.","phoneNumber":"+74996051110","email":"business.welcome@tbank.ru","addresses":[{"type":"REGISTRATION_ADDRESS","address":"5th floor BERENGARIA 25 Spyrou Araouzou 25 Limassol, Cyprus, 3036a"},{"type":"LEGAL_ENTITY_ADDRESS","address":"5th floor BERENGARIA 25 Spyrou Araouzou 25 Limassol, Cyprus, 3036"},{"type":"OFFICE_OF_FOREIGN_LEGAL_ENTITY_ADDRESS","address":"5th floor BERENGARIA 25 Spyrou Araouzou 25 Limassol, Cyprus, 3036"}],"nza":"12345678912","registrationDate":"2015-11-13","registrationNumber":"107963","opf":"Plc.","inn":"9909215909","kio":"21590"},{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","type":"IP_RESIDENT","firstName":"Олег","middleName":"Юрьевич","lastName":"Анисимов","birthDate":"1974-01-23","birthPlace":"г. Москва","citizenship":"RU","phoneNumber":"+71378820200","email":"KDDwKOwWD0@Pijg1","documents":[{"type":"PASSPORT","serial":"5000","number":"287846","date":"1998-01-01","organization":"Отделом УФМС по всем городам всех областей необъятной нашей Родины","division":"123-456"}],"addresses":[{"type":"REGISTRATION_ADDRESS","address":"127287, г. Москва, ул. 2-я Хуторская, д. 38А, стр. 26"}],"registrationDate":"2010-01-15","inn":"306707771448","ogrn":"310774601501066"},{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","type":"IP_NONRESIDENT","firstName":"Олег","middleName":"Юрьевич","lastName":"Анисимов","birthDate":"1974-01-23","birthPlace":"г. Москва","citizenship":"US","phoneNumber":"+447768027220","email":"OAAQAYkiXe@uUmPe","documents":[{"type":"FOREIGN_PASSPORT","number":"123456789","date":"1992-02-12","organization":"Issuing organization"},{"type":"MIGRATION_CARD","number":"123456789","date":"1998-01-01","expireDate":"2023-01-01"}],"addresses":[{"type":"REGISTRATION_ADDRESS","address":"127287, г. Москва, ул. 2-я Хуторская, д. 38А, стр. 26"}],"registrationDate":"2010-01-15","inn":"173527033406","ogrn":"310774601501066"},{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","type":"LITE_CONTACT"}]}
1.2 POST beneficiaries
Метод создает бенефициара и возвращает его с ID, который нужен для дальнейшей работы.
параметры: (бенефициар описанный в типах в приложении)
пример ответа: (бенефициар описанный в типах в приложении)
1.3 GET beneficiaries/{beneficiaryId}/bank-details
Возвращает информацию о всех банковских реквизитах бенефициара.
параметры: 
Path parameters beneficiaryId
Query parameters offset
limit
Пример ответа:
{"offset":0,"limit":50,"size":3,"total":3,"results":[{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","type":"PAYMENT_DETAILS","isDefault":false,"bik":"044525974","kpp":"773401001","inn":"906858195320","name":"Киняев Фома Семенович","bankName":"АО \"ТБанк\"","accountNumber":"11223344556677889900","corrAccountNumber":"30101810145250000974"},{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","type":"CARD","isDefault":false,"cardId":"70000000707","terminalKey":"1573803282696E2C"},{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","type":"SBP","isDefault":false,"phoneNumber":"+79001112233","bankId":"100000000004","terminalKey":"1573803282696E2C"}]}
1.4 POST beneficiaries/{beneficiaryId}/bank-details
Создает банковские реквизиты для бенефициара и возвращает их с ID, который нужен для дальнейшего взаимодействия.
параметры: 
Header parameters : Idempotency-Key : uuid
Path parameters: beneficiaryId : uuid
пример ответа {"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","type":"CARD","isDefault":true,"cardId":"70000000707","terminalKey":"1573803282696E2C"}
1.5 POST beneficiaries/{beneficiaryId}/bank-details/{bankDetailsId}/set-default
Выставляет банковские реквизиты бенефициара как реквизиты по умолчанию.
параметры:
Path parameters: beneficiaryId, bankDetailsId
пример ответа: 200 StatusCode
1.6 POST beneficiaries/{beneficiaryId}/add-card-requests
Создать запрос на добавление реквизитов типа CARD для бенефициара
Header parameters: Idempotency-Key
Path parameters: beneficiaryId
Request body schema application/json: terminalKey
пример ответа:
{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","addCardRequestId":"49e46893-9a7e-409b-8c79-647aecaae555","terminalKey":"1573803282696E2C","status":"PENDING","addCardUrl":"https://securepay.tinkoff.ru/e2c/f36d8e7f-4bc6-4250-9f64-7fe986d3dc62"}
1.7 GET beneficiaries/{beneficiaryId}/bank-details/{bankDetailsId}
Возвращает информацию о банковских реквизитах бенефициара по их ID.
Path parameters beneficiaryId:uuid, bankDetailsId:uuid
пример ответа:
{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","type":"CARD","isDefault":true,"cardId":"70000000707","terminalKey":"1573803282696E2C"}
1.8 PUT /beneficiaries/{beneficiaryId}/bank-details/{bankDetailsId}
Полностью изменяет банковские реквизиты бенефициара по их ID Вы можете изменить реквизиты типа PAYMENT_DETAILS и SBP
Path parameters beneficiaryId, bankDetailsId
Request body schema application/json
{
type,
isDefault,
bik,
kpp,
inn,
name,
bankName,
accountNumber,
corrAccountNumber
} (или другие по типам счёта описанным в приложении)
пример ответа {"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","type":"PAYMENT_DETAILS","isDefault":true,"bik":"044525974","kpp":"773401001","inn":"906858195320","name":"Киняев Фома Семенович","bankName":"АО \"ТБанк\"","accountNumber":"11223344556677889900","corrAccountNumber":"30101810145250000974"}
1.9 DEL nominal-accounts/beneficiaries/{beneficiaryId}/bank-details/{bankDetailsId}
Удаляет реквизиты бенефициара по их ID.
1.10 GET beneficiaries/{beneficiaryId}
Возвращает информацию о бенефициаре по его ID.
(тип отвеа - бенефициар, описанный в приложении)
1.11 PUT beneficiaries/{beneficiaryId}
Метод полностью изменяет данные бенефициара по его ID.
Path parameters beneficiaryId
Request body schema application/json (тип бенефициар описанный в приложении)

2.Биллинг
2.1 GET payments
Query parameters
beneficiaryId
String<uuid>
ID бенефициара.
dealId
String<uuid>
ID сделки.
accountNumber
String
Requirements: Value must match regular expression ^(\d{20}|\d{22})$
Номер номинального счета.
offset
Integer<int32>
Количество платежей, которое нужно пропустить. Значение по умолчанию — 0.
limit
Integer<int32>
Количество платежей, которое нужно вывести. Значение по умолчанию — 50.
Пример ответа: {"offset":0,"limit":50,"size":8,"total":8,"results":[{"type":"REGULAR","paymentId":"58097aa1-9660-47e7-8550-f2167fa80cea","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","bankDetails":{"type":"PAYMENT_DETAILS","bik":"044525974","kpp":"773401001","inn":"906858195320","name":"Киняев Фома Семенович","bankName":"АО \"ТБанк\"","accountNumber":"11223344556677889900","corrAccountNumber":"30101810145250000974"},"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":100,"status":"SUCCEEDED","purpose":"Назначение платежа","operationId":"171f9b1f-9f7c-4d7d-b6b3-4bf4a1d6cc7d"},{"type":"REGULAR","paymentId":"58097aa1-9660-47e7-8550-f2167fa80cea","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","bankDetails":{"type":"PAYMENT_DETAILS","bik":"044525974","kpp":"773401001","inn":"906858195320","name":"Киняев Фома Семенович","bankName":"АО \"ТБанк\"","accountNumber":"11223344556677889900","corrAccountNumber":"30101810145250000974"},"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":100,"status":"FAILED","errorMessage":"Проверьте номер счета банка получателя — возможно, вы указали неправильные цифры","purpose":"Назначение платежа","operationId":"171f9b1f-9f7c-4d7d-b6b3-4bf4a1d6cc7d"},{"type":"REGULAR","paymentId":"58097aa1-9660-47e7-8550-f2167fa80cea","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","bankDetails":{"type":"CARD","cardId":"70000000707","terminalKey":"1573803282696E2C"},"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":100,"status":"SUCCEEDED","purpose":"Назначение платежа","operationId":"171f9b1f-9f7c-4d7d-b6b3-4bf4a1d6cc7d"},{"type":"REGULAR","paymentId":"58097aa1-9660-47e7-8550-f2167fa80cea","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","bankDetails":{"type":"CARD","cardId":"70000000707","terminalKey":"1573803282696E2C"},"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":100,"status":"FAILED","errorMessage":"Transaction not permitted to card","purpose":"Назначение платежа","operationId":"171f9b1f-9f7c-4d7d-b6b3-4bf4a1d6cc7d"},{"type":"REGULAR","paymentId":"58097aa1-9660-47e7-8550-f2167fa80cea","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","bankDetails":{"type":"SBP","phoneNumber":"+79001112233","bankId":"100000000004","terminalKey":"1573803282696E2C"},"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":100,"status":"SUCCEEDED","purpose":"Назначение платежа","operationId":"171f9b1f-9f7c-4d7d-b6b3-4bf4a1d6cc7d"},{"type":"REGULAR","paymentId":"58097aa1-9660-47e7-8550-f2167fa80cea","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","bankDetails":{"type":"SBP","phoneNumber":"+79001112233","bankId":"100000000004","terminalKey":"1573803282696E2C"},"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":100,"status":"FAILED","errorMessage":"Specified bank is not SBP member","purpose":"Назначение платежа","operationId":"171f9b1f-9f7c-4d7d-b6b3-4bf4a1d6cc7d"},{"type":"TAX","paymentId":"58097aa1-9660-47e7-8550-f2167fa80cea","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","bankDetails":{"type":"PAYMENT_DETAILS","bik":"444555666","kpp":"111222333","inn":"1234567890","name":"Какой-то отдел ФНС","bankName":"Чемпион","accountNumber":"11122233344455566677","corrAccountNumber":"12345678901234567890"},"amount":100,"status":"SUCCEEDED","purpose":"Сумма налога на имущество, Иванов Иван Иванович, по исполнительному листу от 01.08.2021 по делу N 2-2733/2021","uin":"0","tax":{"payerStatus":"19","kbk":"18210301000011000110","oktmo":"50701000","evidence":"0","period":"0","docNumber":"01;0201251245","docDate":"0","thirdParty":{"inn":"123456789012","kpp":"0"}},"operationId":"171f9b1f-9f7c-4d7d-b6b3-4bf4a1d6cc7d"},{"type":"TAX","paymentId":"58097aa1-9660-47e7-8550-f2167fa80cea","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","bankDetails":{"type":"PAYMENT_DETAILS","bik":"444555666","kpp":"111222333","inn":"1234567890","name":"Какой-то отдел ФНС","bankName":"Чемпион","accountNumber":"11122233344455566677","corrAccountNumber":"12345678901234567890"},"amount":100,"status":"FAILED","errorMessage":"Проверьте номер счета банка получателя — возможно, вы указали неправильные цифры","purpose":"Сумма налога на имущество, Иванов Иван Иванович, по исполнительному листу от 01.08.2021 по делу N 2-2733/2021","uin":"0","tax":{"payerStatus":"19","kbk":"18210301000011000110","oktmo":"50701000","evidence":"0","period":"0","docNumber":"01;0201251245","docDate":"0","thirdParty":{"inn":"123456789012","kpp":"0"}},"operationId":"171f9b1f-9f7c-4d7d-b6b3-4bf4a1d6cc7d"}]}
2.2 POST payments
Позволяет напрямую вывести средства с виртуального счета бенефициара на реальный счет. Для налогового платежа можно указать реквизиты целиком. Только для типа PAYMENT_DETAILS 
Header parameters Idempotency-Key
Request body schema application/json
{
type (REGULAR/TAX) Required
beneficiaryId, Required
accountNumber, Required
bankDetailsId,
amount, Required
purpose Required
}
пример ответа: 
{"type":"REGULAR","paymentId":"58097aa1-9660-47e7-8550-f2167fa80cea","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","bankDetails":{"type":"PAYMENT_DETAILS","bik":"044525974","kpp":"773401001","inn":"906858195320","name":"Киняев Фома Семенович","bankName":"АО \"ТБанк\"","accountNumber":"11223344556677889900","corrAccountNumber":"30101810145250000974"},"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":100,"status":"SUCCEEDED","purpose":"Назначение платежа","operationId":"171f9b1f-9f7c-4d7d-b6b3-4bf4a1d6cc7d"}
2.3 GET virtual-accounts/holds
Позволяет получить список холдов на виртуальных счетах бенефициаров в рамках номинального счета.
Query parameters
accountNumber String Requirements: Value must match regular expression ^(\d{20}|\d{22})$
Номер номинального счета.
beneficiaryId String<uuid> ID бенефициара.
offset Integer<int32> Количество холдов, которое нужно пропустить. Значение по умолчанию — 0.
limit Количество холдов, которое нужно вывести. Значение по умолчанию — 50
пример ответа: {"offset":0,"limit":50,"size":1,"total":1,"results":[{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","holdId":"7540c2ca-2373-472a-a099-7756475484a9","dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","paymentId":"58097aa1-9660-47e7-8550-f2167fa80cea","amount":100}]}
2.4 GET incoming-transactions
Позволяет получить список транзакций пополнения номинального счета, которые еще не прошли идентификацию.
Query parameters
accountNumber String Requirements: Value must match regular expression ^(\d{20}|\d{22})$ Номер номинального счета.
offset Integer<int32> Количество неидентифицированных пополнений, которое нужно пропустить. Значение по умолчанию — 0.
limit Integer<int32> Количество неидентифицированных пополнений, которое нужно вывести. Значение по умолчанию — 50.
пример ответа: {"offset":0,"limit":50,"size":1,"total":1,"results":[{"accountNumber":"40702810110011000777","operationId":"171f9b1f-9f7c-4d7d-b6b3-4bf4a1d6cc7d","amount":7500,"currency":"643","operationAmount":100,"operationCurrency":"840","payerBik":"044525974","payerKpp":"773401001","payerInn":"906858195320","payerBankName":"АО \"ТБанк\"","payerBankSwiftCode":"TICSRUMMXXX","payerAccountNumber":"40802810300002711854","payerCorrAccountNumber":"30101810145250000974","payerName":"Киняев Фома Семенович","paymentPurpose":"Назначение платежа","documentNumber":"287846","chargeDate":"2022-01-20T14:10:56Z","authorizationDate":"2022-01-20T14:10:56Z","transactionDate":"2022-01-20T14:10:56Z","drawDate":"2022-01-20T14:10:56Z"}]}
2.5 POST payments/{paymentId}/retry
Позволяет повторить неуспешный платеж в рамках сделки по ID платежа.
Path parameters: 
paymentId String<uuid> Идентификатор платежа.
пример ответа: {"retryPaymentId":"126ffab2-62e9-11ec-bca6-43f40eceb896"}
2.6 POST incoming-transactions/{operationId}/identify
Позволяет идентифицировать одну из операций пополнения.
Path parameters: operationId String<uuid> ID операции пополнения.
Request body schema application/json 
(пример тела запроса)
{"amountDistribution":[{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","amount":100},{"beneficiaryId":"75c0d3c4-1a5b-11ec-8669-0326f772aecb","amount":50}]}
2.7 GET virtual-accounts/transfers/{transferId}
Метод для получения информации о переводе средств с виртуального счета одного бенефициара на виртуальный счет другого бенефициара.
Path parameters: transferId String<uuid> Идентификатор перевода.
пример ответа:
{"type":"DIRECT","transferId":"894c5178-4d7f-41da-b4d3-1433c67ce26b","accountNumber":"40702810110011000777","from":{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66"},"to":{"beneficiaryId":"023428b8-f490-4456-a58e-d97460db3923"},"amount":100,"purpose":"Назначение платежа"}
2.8 GET virtual-accounts/transfers
Метод для получения информации о переводах средств между виртуальными счетами бенефициаров в рамках одного номинального счета.
Query parameters: 
accountNumber String Requirements: Value must match regular expression ^(\d{20}|\d{22})$ Номер номинального счета.

dealId String<uuid> Идентификатор сделки. fromBeneficiaryId String<uuid> Идентификатор бенефициара-отправителя. Required
limit Integer Количество переводов, которое нужно вывести. Значение по умолчанию — 50.
offset Integer Количество переводов, которое нужно пропустить. Значение по умолчанию — 0.
toBeneficiaryId String<uuid> Идентификатор бенефициара-получателя.
пример ответа: {"offset":0,"limit":50,"size":3,"total":3,"results":[{"type":"DIRECT","transferId":"a769f88b-b215-4a92-8473-c6b6ca60d0d0","accountNumber":"40702810110011000777","from":{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66"},"to":{"beneficiaryId":"49e46893-9a7e-409b-8c79-647aecaae555"},"purpose":"Назначение платежа","amount":322},{"type":"TO_DEAL","transferId":"a769f88b-b215-4a92-8473-c6b6ca60d0d1","accountNumber":"40702810110011000777","from":{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66"},"to":{"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c"},"amount":322},{"type":"FROM_DEAL","transferId":"a769f88b-b215-4a92-8473-c6b6ca60d0d2","accountNumber":"40702810110011000777","from":{"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c"},"to":{"beneficiaryId":"49e46893-9a7e-409b-8c79-647aecaae555"},"purpose":"Назначение платежа","amount":322}]}
2.9 POST virtual-accounts/transfers
Метод для перевода денег с виртуального счета одного бенефициара на виртуальный счет другого бенефициара.
Header parameters: Idempotency-Key (Required)
Request body schema application/json
(пример тела запроса)
{"accountNumber":"40702810110011000777","from":{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66"},"to":{"beneficiaryId":"023428b8-f490-4456-a58e-d97460db3923"},"amount":100,"purpose":"Назначение платежа"}
пример ответа:
{"type":"DIRECT","transferId":"894c5178-4d7f-41da-b4d3-1433c67ce26b","accountNumber":"40702810110011000777","from":{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66"},"to":{"beneficiaryId":"023428b8-f490-4456-a58e-d97460db3923"},"amount":100,"purpose":"Назначение платежа"}
2.10 GET payments/{paymentId}
Метод для получения платежа по ID платежа.
Path parameters paymentId
пример ответа: {"type":"REGULAR","paymentId":"58097aa1-9660-47e7-8550-f2167fa80cea","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","bankDetails":{"type":"PAYMENT_DETAILS","bik":"044525974","kpp":"773401001","inn":"906858195320","name":"Киняев Фома Семенович","bankName":"АО «ТБанк»","accountNumber":"11223344556677889900","corrAccountNumber":"30101810145250000974"},"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":100,"status":"SUCCEEDED","purpose":"Назначение платежа","operationId":"171f9b1f-9f7c-4d7d-b6b3-4bf4a1d6cc7d"}
2.11 GET virtual-accounts/balances
Позволяет получить список балансов бенефициаров по одному или нескольким виртуальным счетам в рамках номинального счета.
Query parameters
accountNumber String Requirements: Value must match regular expression ^(\d{20}|\d{22})$ Номер номинального счета.
beneficiaryId String<uuid> ID бенефициара.
offset Integer<int32> Количество балансов, которое нужно пропустить. Значение по умолчанию — 0.
limit Integer<int32> Количество балансов, которое нужно вывести. Значение по умолчанию — 50.
пример ответа:
{"offset":0,"limit":50,"size":1,"total":1,"results":[{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","accountNumber":"40702810110011000777","amount":7500,"amountOnHold":1000}]}
3 Депоненты и реципиенты
3.1 GET deals/{dealId}/steps/{stepId}/recipients/{recipientId}
Позволяет получить получателя денежных средств — реципиента (recipient) по ID реципиента (recipientId).
Path parameters dealId Required stepId Required recipientId Required
пример ответа: {"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":90,"tax":5,"purpose":"Назначение платежа","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","keepOnVirtualAccount":false}
3.2 PUT deals/{dealId}/steps/{stepId}/recipients/{recipientId}
Позволяет изменить данные получателя денежных средств — реципиента (recipient) на этапе сделки. Только для сделок в статусе DRAFT.
Path parameters dealId Required stepId Required recipientId Required
Request body schema application/json
(пример тела запроса)
{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","amount":90,"tax":5,"purpose":"Назначение платежа","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","keepOnVirtualAccount":false}
пример ответа:
{"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":90,"tax":5,"purpose":"Назначение платежа","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","keepOnVirtualAccount":false}
3.3 DEL deals/{dealId}/steps/{stepId}/recipients/{recipientId}
Позволяет удалить получателя денежных средств — реципиента (recipient) на этапе сделки. Только для сделок в статусе DRAFT.
Path parameters dealId Required stepId Required recipientId Required
3.4  GET deals/{dealId}/steps/{stepId}/deponents/{beneficiaryId}
Позволяет получить депонента по ID бенефициара.
Path parameters dealId Required stepId Required beneficiaryId Required
пример ответа: {"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","amount":100}
3.5 PUT deals/{dealId}/steps/{stepId}/deponents/{beneficiaryId}
Позволяет создать или обновить депонента на этапе сделки. Только для сделок в статусе DRAFT
Path parameters dealId Required stepId Required beneficiaryId Required
Request body schema application/json
{"amount":100}
Request body schema application/json
пример овтета:
{"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","amount":100}
3.6 DEL deals/{dealId}/steps/{stepId}/deponents/{beneficiaryId}
Позволяет удалить депонента на этапе сделки. Только для сделок в статусе DRAFT
Path parameters dealId Required stepId Required beneficiaryId Required
3.7 GET  deals/{dealId}/steps/{stepId}/deponents
Позволяет получить всех депонентов этапа сделки.
Path parameters dealId Required  stepId Required
Query parameters offset Значение по умолчанию — 0  limit Количество депонентов, которое нужно вывести. Значение по умолчанию — 50
пример ответа {"offset":0,"limit":50,"size":1,"total":1,"results":[{"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","amount":100}]}
3.8 POST deals/{dealId}/steps/{stepId}/recipients/{recipientId}/update-bank-details
Позволяет обновить банковские реквизиты у получателя денежных средств — реципиента (recipient) при неуспешности платежа. Только для сделок в статусе PAYMENT_FAILED.
Path parameters dealId stepId Required recipientId Required 
Request body schema application/json
(пример тела запроса)
{"bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555"}
3.9 GET deals/{dealId}/steps/{stepId}/recipients
Позволяет получить всех получателей денежных средств — реципиентов (recipients) этапа сделки.
Path parameters dealId Required stepId Required 
Query parameters
offset Значение по умолчанию — 0  limit Значение по умолчанию — 50
пример ответа: 
{"offset":0,"limit":50,"size":1,"total":1,"results":[{"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":90,"tax":5,"purpose":"Назначение платежа","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","keepOnVirtualAccount":false}]}
3.10 POST deals/{dealId}/steps/{stepId}/recipients
Позволяет создать получателя денежных средств — реципиента (recipient) на этапе сделки. Только для сделок в статусе DRAFT
Header parameters Idempotency-Key Required
Path parameters dealId Required  stepId Required
Request body schema application/json (пример тела запроса)
{"beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","amount":90,"tax":5,"purpose":"Назначение платежа","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","keepOnVirtualAccount":false}
пример ответа:
{"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","beneficiaryId":"61f656e0-0a86-4ec2-bd43-232499f7ad66","recipientId":"00021d4e-536f-11ec-ac0b-370ccfeacec2","amount":90,"tax":5,"purpose":"Назначение платежа","bankDetailsId":"49e46893-9a7e-409b-8c79-647aecaae555","keepOnVirtualAccount":false}
4.Управление сделками
4.1 POST deals/{dealId}/cancel
Позволяет перевести сделку в статус CANCELLED, чтобы ее отменить.
Path parameters  dealId Required 
4.2 GET deals/{dealId}/is-valid
Метод для проверки возможности совершения платежа в сделке. Сверяет сумму депонирования с суммой в настройках и проверяет, хватает ли указанных средств на виртуальных счетах депонентов.
Path parameters dealId Required
пример ответа"{"isValid":false,"reasons":[{"code":"NO_STEPS_IN_DEAL","description":"Deal contains no steps.","details":{"stepId":"306f557f-2b3c-460d-8429-1d61c59836df"}}]}
4.3 POST deals/{dealId}/draft
Позволяет перевести сделку в статус DRAFT. В этом статусе сделку можно редактировать.
Path parameters dealId Required
4.4 GET deals
Позволяет получить список сделок компании.
Query parameters offset Количество сделок, которое нужно пропустить. Значение по умолчанию — 0  limit Количество сделок, которое нужно вывести. Значение по умолчанию — 50
пример ответа: {"offset":0,"limit":50,"size":1,"total":1,"results":[{"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","accountNumber":"40702810110011000777","status":"DRAFT"}]}
4.5 POST deals
Позволяет создать сделку. Вам понадобится номер номинального счета.
Header parameters Idempotency-Key Required
Request body schema application/json 
пример тела запроса {"accountNumber":"40702810110011000777"}
пример ответа {"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","accountNumber":"40702810110011000777","status":"DRAFT"}
4.6 GET deals/{dealId}
Метод для получения сделки по ее идентификатору.
Path parameters dealId Required
пример ответа {"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","accountNumber":"40702810110011000777","status":"DRAFT"}
4.7 DEL deals/{dealId}
Позволяет удалить сделку, которая находится в статусе DRAFT.
4.8 POST deals/{dealId}/accept
Позволяет перевести сделку в статус ACCEPTED — после DRAFT.
Path parameters  dealId Required
5 Управление этапами сделок
5.1 GET deals/{dealId}/steps
Позволяет получить список этапов сделки компании.
Path parameters dealId Required
Query parameters offset Количество этапов, которое нужно пропустить. Значение по умолчанию — 0. limit Количество этапов, которое необходимо вывести. Значение по умолчанию — 50.
пример ответа: {"offset":0,"limit":50,"size":1,"total":1,"results":[{"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","stepNumber":1,"description":"Описание этапа сделки","status":"NEW"}]}
5.2 POST deals/{dealId}/steps 
Когда сделка создана, нужно создать этап(-ы) сделки для совершения финансовых операций. Если в рамках сделки совершаются только одновременные выплаты, создайте только один этап.
Path parameters dealId Required 
Header parameters Idempotency-Key Required
Request body schema application/json
пример тела запроса {"description":"Описание этапа сделки"}
пример ответа {"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","stepNumber":1,"description":"Описание этапа сделки","status":"NEW"}
5.3 POST deals/{dealId}/steps/{stepId}/complete
Позволяет завершить этап для совершения выплат конечным получателям — реципиентам (recipients), когда все условия сделки выполнены.
Path parameters dealId Required stepId Required
5.4 GET deals/{dealId}/steps/{stepId}
Метод для получения этапа по ID этапа.
Path parameters dealId Required  stepId Required
пример ответа 
{"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","stepNumber":1,"description":"Описание этапа сделки","status":"NEW"}
5.5 PUT deals/{dealId}/steps/{stepId}
Позволяет внести изменения в этап сделки. Только для сделок в статусе DRAFT.
Path parameters dealId Required  stepId Required 
Request body schema application/json
(пример тела запроса)
{"description":"Описание этапа сделки"}
пример ответа {"dealId":"dd6c3237-9958-47d9-9ba0-f6faeaa0e788","stepId":"c87d3297-f4ae-4f88-add9-6722c1fc0b8c","stepNumber":1,"description":"Описание этапа сделки","status":"NEW"}
5.6 DEL deals/{dealId}/steps/{stepId}
Позволяет удалить этап. Только для сделок в статусе DRAFT.
Path parameters dealId Required stepId Required